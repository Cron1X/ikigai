<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ikigai Diagram Generator</title>
  <style>
    :root{
      --bg:#0b1020; /* deep indigo */
      --card:#11172e;
      --muted:#7f8ab2;
      --ink:#e9efff;
      --accent:#6aa9ff;
      --ring: 2px solid #283255;
      --radius:20px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--ink); background: radial-gradient(1200px 800px at 70% 0%, #111936, var(--bg));
    }
    .wrap{max-width:1200px; margin:0 auto; padding:24px; display:grid; gap:24px}
    header{display:flex; flex-wrap:wrap; align-items:center; gap:16px; justify-content:space-between}
    h1{font-size:clamp(22px,3vw,32px); margin:0; letter-spacing:.3px}
    .sub{color:var(--muted); font-size:14px}
    .grid{display:grid; grid-template-columns: 360px 1fr; gap:24px}
    @media (max-width: 1000px){ .grid{grid-template-columns: 1fr} }

    .card{background:linear-gradient(180deg, #131a33, #0f1630); border:var(--ring); border-radius:var(--radius); box-shadow:0 10px 30px rgba(0,0,0,.35);}
    .panel{padding:18px}
    .panel h2{font-size:16px; margin:0 0 12px}
    label{display:block; font-size:12px; color:var(--muted); margin:12px 0 6px}
    textarea, input, select{width:100%; background:#0c132b; color:var(--ink); border:1px solid #25305a; border-radius:12px; padding:10px 12px; outline:none}
    textarea{min-height:78px; resize:vertical}
    .row{display:grid; gap:12px; grid-template-columns:1fr 1fr}
    .row3{display:grid; gap:12px; grid-template-columns:1fr 1fr 1fr}
    .btns{display:flex; flex-wrap:wrap; gap:10px; margin-top:14px}
    .btn{appearance:none; background:#1a2142; border:1px solid #2a386b; color:var(--ink); padding:10px 14px; border-radius:12px; cursor:pointer; font-weight:600}
    .btn:hover{background:#212a53}
    .btn.primary{background:linear-gradient(180deg,#3a7bff,#2563eb); border-color:#2f5bd1}
    .btn.ghost{background:transparent}
    .hint{font-size:12px; color:#a6b4e8}

    /* Canvas area */
    .stage-wrap{position:relative; aspect-ratio:1/1; width:100%; max-width:900px; margin: 0 auto;}
    .stage{width:100%; height:100%}
    .legend{display:flex; gap:10px; align-items:center; font-size:12px; color:var(--muted); margin-top:10px}
    .dot{width:10px; height:10px; border-radius:999px}

    /* Tooltips for small screens */
    .touch-tip{display:none}
    @media (max-width: 640px){ .touch-tip{display:block; font-size:12px; color:var(--muted); margin-top:8px} }

    /* Small footer */
    footer{color:#8fa0db; font-size:12px; display:flex; gap:8px; align-items:center; justify-content:center; padding-bottom:24px}
  </style>
</head>
<body>
  <div class ="wrap">
    <p> <br>
      <h2> What is Ikigai? </h2> <br>
      Ikigai (生き甲斐) is a Japanese concept that roughly translates to “reason for being.”</h2> <br> It refers to the sense of purpose or meaning that makes life feel worthwhile. The idea combines “iki” (life) and “gai” (value, worth) — together meaning something like “that which makes life worth living.” </p>
<p> <h2>The Four Elements of Ikigai: </h2> <br>
Ikigai is often visualized as the intersection of four overlapping circles — like a Venn diagram — representing: <br>
What You Love – your passions and interests. <br>
What You Are Good At – your skills, talents, and strengths.<br>
What the World Needs – problems you can solve or ways you can contribute to others.<br>
What You Can Be Paid For – opportunities that can sustain you financially.<br>
Where these four circles overlap, you find your Ikigai — a sweet spot where your passion, mission, vocation, and profession meet.<br> </p>
<p><h2>Why It Matters</h2><br>
People who pursue their Ikigai often experience: <br>
Motivation and Fulfillment: They wake up with a sense of direction.<br>
Resilience: A clear purpose helps them push through challenges.<br>
Balance: It aligns personal joy with contribution and practicality.<br> </p>
<p><h2> Ikigai in Practice </h2> <br>
Finding your Ikigai is a process, not a single “aha moment.” Many people journal, reflect, or experiment with different activities to identify what fits each circle. You can ask yourself: <br>
What activities make me lose track of time?<br>
What problems in the world make me want to take action?<br>
What do others come to me for advice or help with?<br>
What could I imagine doing every day, even if I weren’t paid for it? </p><br>
    </div>
  <div class="wrap">
    <header>
      <div>
        <h1>Ikigai Diagram Generator</h1>
        <div class="sub">Type your lists → build your personalized Ikigai Venn diagram → download as SVG/PNG.</div>
      </div>
      <div class="btns">
        <button class="btn" id="exampleBtn" title="Load an example">Load example</button>
        <button class="btn ghost" id="clearBtn" title="Clear all inputs">Clear</button>
      </div>
    </header>

    <div class="grid">
      <!-- Input Panel -->
      <div class="card panel">
        <h2>Your Inputs</h2>
        <div class="row">
          <div>
            <label for="love">What you love</label>
            <textarea id="love" placeholder="e.g., teaching, writing, gardening\nSeparate with commas or new lines"></textarea>
          </div>
          <div>
            <label for="good">What you are good at</label>
            <textarea id="good" placeholder="e.g., explaining concepts, design, coding"></textarea>
          </div>
        </div>
        <div class="row">
          <div>
            <label for="world">What the world needs</label>
            <textarea id="world" placeholder="e.g., clear communication, accessible education, sustainable habits"></textarea>
          </div>
          <div>
            <label for="paid">What you can be paid for</label>
            <textarea id="paid" placeholder="e.g., curriculum development, corporate training, UX consulting"></textarea>
          </div>
        </div>
        <div class="row3">
          <div>
            <label for="dedupe">Matching style</label>
            <select id="dedupe">
              <option value="smart" selected>Smart match (singular/plural, hyphens, case)</option>
              <option value="exact">Exact text match only</option>
            </select>
          </div>
          <div>
            <label for="sep">Separator for export</label>
            <select id="sep">
              <option value=", ">Comma + space</option>
              <option value="\n">New line</option>
              <option value="; ">Semicolon</option>
            </select>
          </div>
          <div>
            <label>&nbsp;</label>
            <button id="buildBtn" class="btn primary" title="Build/refresh the diagram">Build Diagram</button>
          </div>
        </div>
        <div class="btns">
          <button id="saveSvg" class="btn">Download SVG</button>
          <button id="savePng" class="btn">Download PNG</button>
          <button id="copyData" class="btn ghost">Copy JSON</button>
        </div>
        <p class="hint">Tip: items are matched across lists; anything appearing in 2+ lists flows into the overlaps. Use short phrases for best layout.</p>
      </div>

      <!-- Diagram Panel -->
      <div class="card panel">
        <h2>Your Ikigai</h2>
        <div class="stage-wrap">
          <!-- Scalable SVG diagram -->
          <svg id="svg" class="stage" viewBox="0 0 1000 1000" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <style>
                .title{font: 700 26px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; fill:#e9efff}
                .label{font: 600 18px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; fill:#d7e0ff}
                .body{font: 500 14px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; fill:#e9efff}
                .muted{fill:#a8b4e6}
              </style>
              <filter id="soft" x="-20%" y="-20%" width="140%" height="140%">
                <feGaussianBlur stdDeviation="15" result="b"/>
                <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
              </filter>
            </defs>
            <!-- Background grid dots for subtle depth -->
            <g opacity=".25">
              <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
                <circle cx="1" cy="1" r="1" fill="#283255"/>
              </pattern>
              <rect x="0" y="0" width="1000" height="1000" fill="url(#grid)"/>
            </g>

            <!-- Circles (top, left, right, bottom) -->
            <g id="circles" opacity=".92">
              <circle id="cLove" cx="500" cy="325" r="260" fill="#ff4d6d" fill-opacity=".30" stroke="#ff86a1" stroke-width="3" filter="url(#soft)"/>
              <circle id="cGood" cx="325" cy="500" r="260" fill="#22c55e" fill-opacity=".30" stroke="#63e28f" stroke-width="3" filter="url(#soft)"/>
              <circle id="cWorld" cx="675" cy="500" r="260" fill="#60a5fa" fill-opacity=".30" stroke="#9cc4ff" stroke-width="3" filter="url(#soft)"/>
              <circle id="cPaid" cx="500" cy="675" r="260" fill="#f59e0b" fill-opacity=".30" stroke="#ffd27a" stroke-width="3" filter="url(#soft)"/>
            </g>

            <!-- Headings for each circle -->
            <text x="500" y="90" text-anchor="middle" class="title">Ikigai</text>
            <text x="500" y="120" text-anchor="middle" class="muted">Personalized from your inputs</text>

            <text x="500" y="75+325-260-16" class="label" text-anchor="middle">What you love</text>
            <text x="325-260-16" y="500" transform="rotate(-90 49 500)" class="label" text-anchor="middle">What you are good at</text>
            <text x="951" y="500" transform="rotate(90 951 500)" class="label" text-anchor="middle">What the world needs</text>
            <text x="500" y="980" class="label" text-anchor="middle">What you can be paid for</text>

            <!-- Named overlap labels -->
            <text x="415" y="360" class="label" text-anchor="middle">Passion</text>
            <text x="585" y="360" class="label" text-anchor="middle">Mission</text>
            <text x="585" y="640" class="label" text-anchor="middle">Vocation</text>
            <text x="415" y="640" class="label" text-anchor="middle">Profession</text>

            <!-- Content regions via foreignObject for wrapped lists -->
            <!-- Passion (Love ∩ Good) -->
            <foreignObject id="rPassion" x="300" y="300" width="230" height="130">
              <div xmlns="http://www.w3.org/1999/xhtml" class="body"></div>
            </foreignObject>
            <!-- Mission (Love ∩ World) -->
            <foreignObject id="rMission" x="470" y="300" width="230" height="130">
              <div xmlns="http://www.w3.org/1999/xhtml" class="body"></div>
            </foreignObject>
            <!-- Vocation (World ∩ Paid) -->
            <foreignObject id="rVocation" x="470" y="570" width="230" height="130">
              <div xmlns="http://www.w3.org/1999/xhtml" class="body"></div>
            </foreignObject>
            <!-- Profession (Good ∩ Paid) -->
            <foreignObject id="rProfession" x="300" y="570" width="230" height="130">
              <div xmlns="http://www.w3.org/1999/xhtml" class="body"></div>
            </foreignObject>
            <!-- Ikigai (all four) center -->
            <foreignObject id="rIkigai" x="410" y="450" width="180" height="120">
              <div xmlns="http://www.w3.org/1999/xhtml" style="text-align:center; font-weight:700" class="body"></div>
            </foreignObject>
          </svg>
          <div class="legend">
            <div class="dot" style="background:#ff7f96"></div> Love
            <div class="dot" style="background:#6ee7a6"></div> Good at
            <div class="dot" style="background:#9ec6ff"></div> World needs
            <div class="dot" style="background:#ffc565"></div> Paid for
          </div>
          <div class="touch-tip">Tip: On small screens, rotate your phone or use shorter phrases for better fit.</div>
        </div>
      </div>
    </div>

    <footer>
      <span>Made with ❤ — no frameworks, just SVG + JS.</span>
    </footer>
  </div>

<script>
(function(){
  const $ = (sel, root=document) => root.querySelector(sel);
  const $$ = (sel, root=document) => [...root.querySelectorAll(sel)];

  const el = {
    love: $('#love'), good: $('#good'), world: $('#world'), paid: $('#paid'),
    build: $('#buildBtn'), clear: $('#clearBtn'), example: $('#exampleBtn'),
    saveSvg: $('#saveSvg'), savePng: $('#savePng'), copyData: $('#copyData'),
    sep: $('#sep'), dedupe: $('#dedupe'), svg: $('#svg')
  };

  const regions = {
    Passion: $('#rPassion div'),
    Mission: $('#rMission div'),
    Vocation: $('#rVocation div'),
    Profession: $('#rProfession div'),
    Ikigai: $('#rIkigai div')
  };

  function normalizeToken(t, mode){
    t = t.trim();
    if(!t) return '';
    if(mode === 'exact') return t;
    // smart: lowercase, remove common punctuation, basic singularization
    let s = t.toLowerCase();
    s = s.replace(/[–—]/g,'-');
    s = s.replace(/[\.!?]/g,'');
    s = s.replace(/\s+/g,' ');
    // simple plural/gerund normalization
    s = s.replace(/(ing|ings)$/,'ing');
    s = s.replace(/(ies)$/,'y');
    s = s.replace(/(sses)$/,'ss');
    s = s.replace(/(s)$/,(m)=> m && !s.endsWith('ss') ? '' : '');
    return s.trim();
  }

  function parseList(text, mode){
    return [...new Set(text
      .split(/[\n,;·•\t]/g)
      .map(x=>x.trim())
      .filter(Boolean)
    )].map(raw=>({ raw, key: normalizeToken(raw, mode) }))
     .filter(x=>x.key);
  }

  function setToMap(arr){
    const map = new Map();
    for(const {key, raw} of arr){
      if(!map.has(key)) map.set(key, new Set());
      map.get(key).add(raw);
    }
    return map;
  }

  function intersectionKeys(...maps){
    const keys = [...maps[0].keys()];
    return keys.filter(k=> maps.every(m=> m.has(k)));
  }

  function renderList(target, items){
    if(!target) return;
    if(!items.length){ target.innerHTML = '<span class="muted">—</span>'; return; }
    const uniqueRaws = [...new Set(items.flatMap(x=>[...x]))];
    target.innerHTML = '<ul style="margin:0; padding-left:18px">' +
      uniqueRaws.map(t=>`<li>${escapeHtml(t)}</li>`).join('') + '</ul>';
  }

  function escapeHtml(s){
    return s.replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;');
  }

  function build(){
    const mode = el.dedupe.value;
    const L = parseList(el.love.value, mode);
    const G = parseList(el.good.value, mode);
    const N = parseList(el.world.value, mode);
    const P = parseList(el.paid.value, mode);

    const ML = setToMap(L), MG = setToMap(G), MN = setToMap(N), MP = setToMap(P);

    // Named overlaps
    const passionKeys = intersectionKeys(ML, MG);
    const missionKeys = intersectionKeys(ML, MN);
    const vocationKeys = intersectionKeys(MN, MP);
    const professionKeys = intersectionKeys(MG, MP);
    const ikigaiKeys = intersectionKeys(ML, MG, MN, MP);

    const itemsFrom = (keys, ...maps) => keys.map(k=> new Set(maps.flatMap(m=>[...(m.get(k)||new Set())])));

    renderList(regions.Passion, itemsFrom(passionKeys, ML, MG));
    renderList(regions.Mission, itemsFrom(missionKeys, ML, MN));
    renderList(regions.Vocation, itemsFrom(vocationKeys, MN, MP));
    renderList(regions.Profession, itemsFrom(professionKeys, MG, MP));
    renderList(regions.Ikigai, itemsFrom(ikigaiKeys, ML, MG, MN, MP));
  }

  // Exports
  function download(filename, text){
    const a = document.createElement('a');
    a.href = 'data:text/plain;charset=utf-8,' + encodeURIComponent(text);
    a.download = filename; a.click();
  }

  function downloadSvg(){
    const clone = el.svg.cloneNode(true);
    // inline computed size to keep render consistent
    clone.setAttribute('width','2000');
    clone.setAttribute('height','2000');
    const xml = new XMLSerializer().serializeToString(clone);
    const svgBlob = `<?xml version="1.0" encoding="UTF-8"?>\n` + xml;
    download('ikigai.svg', svgBlob);
  }

  function downloadPng(){
    const svgData = new XMLSerializer().serializeToString(el.svg);
    const svg64 = 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(svgData);
    const img = new Image();
    const canvas = document.createElement('canvas');
    const scale = 2; // crisp
    canvas.width = 2000; canvas.height = 2000;
    const ctx = canvas.getContext('2d');
    img.onload = () => { ctx.drawImage(img, 0, 0, canvas.width, canvas.height); canvas.toBlob(b=>{
      const url = URL.createObjectURL(b); const a = document.createElement('a'); a.href = url; a.download = 'ikigai.png'; a.click(); URL.revokeObjectURL(url);
    }, 'image/png'); };
    img.src = svg64;
  }

  function copyJson(){
    const data = {
      love: splitRaw(el.love.value),
      good: splitRaw(el.good.value),
      world: splitRaw(el.world.value),
      paid: splitRaw(el.paid.value)
    };
    navigator.clipboard.writeText(JSON.stringify(data, null, 2)).then(()=>{
      toast('Copied your lists as JSON');
    });
  }

  function splitRaw(t){
    return t.split(/[\n,;·•\t]/g).map(x=>x.trim()).filter(Boolean);
  }

  function toast(text){
    const n = document.createElement('div');
    n.textContent = text;
    Object.assign(n.style, { position:'fixed', bottom:'20px', left:'50%', transform:'translateX(-50%)', background:'#1d2547', border:'1px solid #2a386b', color:'#e9efff', padding:'10px 14px', borderRadius:'10px', zIndex:9999, boxShadow:'0 10px 30px rgba(0,0,0,.4)'});
    document.body.appendChild(n); setTimeout(()=> n.remove(), 1700);
  }

  // Example filler
  function loadExample(){
    el.love.value = 'teaching, drawing comics, gardening, writing, mentoring, public speaking';
    el.good.value = 'explaining concepts, curriculum design, writing, public speaking, coding';
    el.world.value = 'clear communication, accessible education, sustainability, mental health literacy, writing';
    el.paid.value = 'corporate training, writing, UX consulting, coding, curriculum design';
    build();
  }

  function clearAll(){
    el.love.value = el.good.value = el.world.value = el.paid.value = '';
    build();
  }

  // Events
  el.build.addEventListener('click', build);
  el.saveSvg.addEventListener('click', downloadSvg);
  el.savePng.addEventListener('click', downloadPng);
  el.copyData.addEventListener('click', copyJson);
  el.example.addEventListener('click', loadExample);
  el.clear.addEventListener('click', clearAll);

  // Build on first load with example for instant preview
  loadExample();
})();
</script>
</body>
</html>
